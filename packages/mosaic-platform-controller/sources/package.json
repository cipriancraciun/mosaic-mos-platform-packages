{
	"_schema" : "tag:ieat.ro,2014:mosaic:v2:mos-package-builder:descriptors:composite-package",
	"_schema/version" : 1,
	
	"package" : {
		"name" : "@{definitions:package:name}",
		"version" : "@{definitions:package:version}",
		"release" : "@{definitions:package:release}",
		"architecture" : "i686",
		"root" : "/opt/@{package:identifier}"
	},
	
	"dependencies" : {
		"provides" : ["@{definitions:package:name}"],
		"requires" : [
			"mosaic-rt-erlang-r15b-32bit",
			"mosaic-rt-nodejs-v0.10-32bit",
			"glibc-32bit",
			"iptables"
		]
	},
	
	"miscellaneous" : {
		"license" : "apache-2.0",
		"url" : "http://mosaic.ieat.ro/",
		"summary" : "mOSAIC platform controller"
	},
	
	"overlays" : [
		{
			"generator" : "folders",
			"target" : "@{package:root}",
			"folders" : [
				"/",
				"/bin",
				"/lib",
				"/lib/mosaic-node",
				"/lib/mosaic-node-wui",
				"/lib/mosaic-node-boot"
			]
		},
		{
			"generator" : "unarchiver",
			"target" : "@{package:root}/lib/mosaic-node",
			"resource" : "mosaic-node.cpio.gz",
			"format" : "cpio+gzip"
		},
		{
			"generator" : "unarchiver",
			"target" : "@{package:root}/lib/mosaic-node-wui",
			"resource" : "mosaic-node-wui.cpio.gz",
			"format" : "cpio+gzip"
		},
		{
			"generator" : "unarchiver",
			"target" : "@{package:root}/lib/mosaic-node-boot",
			"resource" : "mosaic-node-boot.cpio.gz",
			"format" : "cpio+gzip"
		},
		{
			"generator" : "symlinks",
			"target" : "@{package:root}/bin",
			"links" : {
				"mosaic-node--run-node" : "../lib/mosaic-node/bin/mosaic-node--run-node",
				"mosaic-node-wui--run-service" : "../lib/mosaic-node-wui/bin/mosaic-node-wui--run-service",
				"mosaic-node-boot--run-boot" : "../lib/mosaic-node-boot/bin/mosaic-node-boot--run-boot"
			}
		}
	],
	
	"resources" : {
		"mosaic-node.cpio.gz" : {
			"generator" : "fetcher",
			"uri" : "@{definitions:resources:url:base}/mosaic-node--@{definitions:resources:url:suffix}.cpio.gz"
		},
		"mosaic-node-wui.cpio.gz" : {
			"generator" : "fetcher",
			"uri" : "@{definitions:resources:url:base}/mosaic-node-wui--@{definitions:resources:url:suffix}.cpio.gz"
		},
		"mosaic-node-boot.cpio.gz" : {
			"generator" : "fetcher",
			"uri" : "@{definitions:resources:url:base}/mosaic-node-boot--@{definitions:resources:url:suffix}.cpio.gz"
		}
	},
	
	"definitions" : {
		"package:name" : "mosaic-platform-controller",
		"package:version" : "0.7.0_dev",
		"package:release" : "@{execution:timestamp}",
		"resources:url:base" : "http://data.volution.ro/ciprian/public/mosaic/packages",
		"resources:url:suffix" : "@{definitions:package:version}"
	}
}
